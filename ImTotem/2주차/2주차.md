# 3 tier

![img_1](./img/img_1.png)

![img_2](./img/img_2.png)

> ì–´ë– í•œ í”Œë«í¼ì„ 3ê³„ì¸µìœ¼ë¡œ ë‚˜ëˆ„ì–´ ë³„ë„ì˜ ë…¼ë¦¬ì /ë¬¼ë¦¬ì ì¸ ì¥ì¹˜ì— êµ¬ì¶• ë° ìš´ì˜í•˜ëŠ” í˜•íƒœ

## í”„ë ˆì  í…Œì´ì…˜ ê³„ì¸µ (Presentation Tier)

- ì‚¬ìš©ìê°€ ì§ì ‘ ë§ˆì£¼í•˜ê²Œ ë˜ëŠ” ê³„ì¸µì´ë‹¤.
- ì£¼ë¡œ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤(ì¸í„°ë„· ë¸Œë¼ìš°ì € ë“±)ë¥¼ ì§€ì›í•œë‹¤.
- GUI ë˜ëŠ” í”„ë¡ íŠ¸ì—”ë“œ(front-end) ë¼ê³ ë„ ë¶€ë¥¸ë‹¤.
- ê·¸ëŸ¬ë¯€ë¡œ ì´ ê³„ì¸µì—ì„œëŠ” ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ì™€ ê´€ê³„ì—†ëŠ” ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë¡œì§ì€ í¬í•¨í•˜ì§€ ì•ŠëŠ”ë‹¤.
- ì£¼ë¡œ ì›¹ ì„œë²„ë¥¼ ì˜ˆì‹œë¡œ ë“¤ ìˆ˜ ìˆê³ , HTML, Javascript, CSS ë“±ì´ ì´ ê³„ì¸µì— í•´ë‹¹ ëœë‹¤.

## ì–´í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µ (Application Tier)

- ì´ ê³„ì¸µì—ì„œëŠ” í”„ë ˆì  í…Œì´ì…˜ ê³„ì¸µì—ì„œ ìš”ì²­ë˜ëŠ” ì •ë³´ë¥¼ ì–´ë– í•œ ê·œì¹™ì„ ë°”íƒ•ìœ¼ë¡œ ì²˜ë¦¬í•˜ê³  ê°€ê³µí•˜ëŠ” ê²ƒë“¤ì„ ë‹´ë‹¹í•œë‹¤.
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê³„ì¸µ ë˜ëŠ” íŠ¸ëœì­ì…˜ ê³„ì¸µ ì´ë¼ê³ ë„ í•œë‹¤.
- ì²« ë²ˆì§¸ ê³„ì¸µì—ì„œ ì´ ê³„ì¸µì„ ë°”ë¼ë³¼ ë•Œì—ëŠ” ì„œë²„ì²˜ëŸ¼ ë™ì‘í•˜ê³ (ì‘ë‹µ)
- ì„¸ ë²ˆì§¸ ê³„ì¸µì˜ í”„ë¡œê·¸ë¨ì— ëŒ€í•´ì„œëŠ” ë§ˆì¹˜ í´ë¼ì´ì–¸íŠ¸ì²˜ëŸ¼ í–‰ë™í•œë‹¤.(ìš”ì²­)

- ë”°ë¼ì„œ ì´ ê³„ì¸µì€ ë¯¸ë“¤ì›¨ì–´(Middleware) ë˜ëŠ” ë°±ì—”ë“œ(back-end)ë¼ê³ ë„ ë¶ˆë¦°ë‹¤.
- ì´ ê³„ì¸µì—ì„œëŠ” í”„ë ˆì  í…Œì´ì…˜ì½”ë“œ (ì˜ˆë¥¼ ë“¤ë©´ HTML, CSS)ë‚˜ ë°ì´í„° ê´€ë¦¬ë¥¼ ìœ„í•œ ì½”ë“œëŠ” í¬í•¨í•˜ì§€ ì•ŠëŠ”ë‹¤.
- ì£¼ë¡œ PHP, Java ë“±ì´ ì´ ê³„ì¸µì— í•´ë‹¹í•œë‹¤.

## ë°ì´í„° ê³„ì¸µ (Data Tier)

- ë°ì´í„° ê³„ì¸µì€ ë°ì´í„°ë² ì´ìŠ¤ì™€ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼í•˜ì—¬ ë°ì´í„°ë¥¼ ì½ê±°ë‚˜ ì“°ëŠ” ê²ƒì„ ê´€ë¦¬í•˜ëŠ” ê²ƒì„ í¬í•¨í•œë‹¤.
- ì£¼ë¡œ DBMS (Database Management System)ì´ ì´ ê³„ì¸µì— í•´ë‹¹ëœë‹¤.
- ë°ì´í„° ê³„ì¸µ ë˜í•œ ë°±ì—”ë“œ(back-end)ë¼ê³ ë„ ë¶€ë¥¸ë‹¤.
- ì£¼ë¡œ MySQL, MongoDB ë“±ì´ ì´ ê³„ì¸µì— í•´ë‹¹ëœë‹¤.

## ì¥ì 
- ì´ë ‡ê²Œ 3ê³„ì¸µìœ¼ë¡œ êµ¬ì„±ì„ í•˜ê²Œ ë˜ë©´ ê³„ì¸µ ë³„ ì—…ë¬´ ë¶„ë‹´ì´ ê°€ëŠ¥í•´ì§€ë¯€ë¡œ ì—…ë¬´ íš¨ìœ¨ì„±ì´ ì¦ê°€ í•  ìˆ˜ ìˆë‹¤.
- ë˜í•œ ì´ì¤‘í™” ë“±ì„ í†µí•˜ì—¬ ì„œë¹„ìŠ¤ì˜ ë¦¬ìŠ¤í¬ ë° ì—…ë¬´ ë¶€í•˜ë¥¼ ì¤„ì¼ ìˆ˜ê°€ ìˆë‹¤.
- ë§ˆì°¬ê°€ì§€ë¡œ íŠ¹ì • ê³„ì¸µì˜ ì„œë²„ì— ëŒ€í•´ì„œë§Œ í•©ë¦¬ì ì¸ ìŠ¤ì¼€ì¼ì—…ì„ ê³ ë ¤í•  ìˆ˜ë„ ìˆë‹¤.

## ë‹¨ì 
- ë§ì€ ê³„ì¸µì´ ìˆë‹¤ëŠ” ê²ƒì€ ê·¸ë§Œí¼ ê´€ë¦¬ í¬ì¸íŠ¸ê°€ ì¦ê°€í•œë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.
- ë¬¸ì œê°€ ìƒê²¼ì„ ê²½ìš° ë¹ ë¥´ê²Œ ëŒ€ì²˜ê°€ ì–´ë ¤ìš¸ ìˆ˜ ìˆë‹¤.
- ë˜í•œ ê³„ì¸µì— ë”°ë¼ ì„œë²„ê°€ ë§ì•„ì§€ê¸° ë•Œë¬¸ì— ì„œë¹„ìŠ¤ ê·œëª¨ ë° ì‚¬ìš©ì ì¦ê°€ì— ë”°ë¥¸ ì ë‹¹í•œ ê³„ì¸µ êµ¬ì¡° ë° ì„¤ê³„ê°€ ê³ ë ¤ë˜ì–´ì•¼ í•œë‹¤.

> **ğŸ“ŒÂ ì°¸ê³ ìë£Œ**  
> [3ê³„ì¸µ êµ¬ì¡°(3 Tier- Architecture) ì´í•´í•˜ê¸° [ìŠ¤ë§ˆíŠ¸ì¸ì¬ê°œë°œì›]](https://jaws-coding.tistory.com/)
> [3ê³„ì¸µ êµ¬ì¡°(3 Tier Architecture)](https://velog.io/@yeavov/3%EA%B3%84%EC%B8%B5-%EA%B5%AC%EC%A1%B03-Tier-Architecture)

# CI/CD
## CI(Continuous Integration)
- Continuous Integrationì„ ë§í•œë‹¤ â†’ ë¬´ì—‡ì„ í†µí•©í•œë‹¤ëŠ” ê²ƒì¼ê¹Œ?
- ê¸°ë³¸ì ìœ¼ë¡œ ì½”ë“œì´ë‹¤.
- ì—¬ëŸ¬ ëª…ì˜ ë§ì€ ê°œë°œìë“¤ì´ ì½”ë“œ ë² ì´ìŠ¤ë¥¼ ê³„ì†í•´ì„œ í†µí•©í•˜ëŠ” ê²ƒì´ë‹¤.
- ì—¬ëŸ¬ ê°œë°œìë“¤ì˜ ì½”ë“œë¥¼ ê°ê° ê°€ëŠ¥í•œ ë¹ ë¥´ê²Œ ë°°í¬ë¥¼ í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.
- ì¦‰ ì½”ë“œë¥¼ í†µí•©í•œë‹¤ëŠ” ê²ƒì´ë‹¤.

## CD(Continuous Delivery)
- ë‚´ë¶€ ì‚¬ìš©ì(ë‚´ë¶€ QA, ë§ˆì¼€í„°, ê¸°íšì)ë“ , ì‚¬ìš©ìë“  ì„œë¹„ìŠ¤ë¥¼ ì§€ì†ì ìœ¼ë¡œ ë°°ë‹¬í•œë‹¤.
- ì¦‰ ì½”ë“œ ë² ì´ìŠ¤ê°€ í•­ìƒ ë°°í¬ ê°€ëŠ¥í•œ ìƒíƒœë¥¼ ìœ ì§€í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.
## CD(Continuous Deployment)
- ì½”ë“œ ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©ìê°€ ì‚¬ìš© ê°€ëŠ¥í•œ í™˜ê²½ì— ë°°í¬í•˜ëŠ” ê²ƒì„ ìë™í™”í•˜ëŠ” ê²ƒì´ë‹¤.
- ë²„ì „ 1 ì“°ë‹¤ê°€ ëŠí‚¤ì§€ ì•Šê³  ë°°í¬í•˜ëŠ” ê²ƒì„ ë§í•œë‹¤.

> **ì¦‰, CI/CDë€ ê°ê°ì˜ ê°œë°œìë“¤ì´ ê°œë°œì„ í•˜ëŠ” ê°œë°œí™˜ê²½ì„ ì‚¬ìš©ìê°€ ì‚¬ìš© ê°€ëŠ¥í•œ ì„œë¹„ìŠ¤ë¡œ ì „ë‹¬í•˜ëŠ” ëª¨ë“  ê³¼ì •ì„ ì§€ì† ê°€ëŠ¥í•œ í˜•íƒœë¡œ ë˜ ê°€ëŠ¥í•˜ë‹¤ë©´ ìë™ìœ¼ë¡œ í•´ì„œ ê°œë°œìì™€ ì‚¬ìš©ì ì‚¬ì´ì˜ ê²©ì°¨ë¥¼ ì—†ì• ëŠ” ê²ƒì´ë‹¤. ì´ëŸ¬í•œ ê³¼ì •ì—ëŠ” ì½”ë“œë¥¼ ë¹Œë“œí•˜ê³ , í…ŒìŠ¤íŠ¸í•˜ê³  ë°°í¬í•˜ëŠ” í™œë™ì´ ìˆë‹¤.**

> **ğŸ“ŒÂ ì°¸ê³ ìë£Œ**  
> [Jenkinsë€? (CI / CDì™€ Jenkinsì˜ ê°œë…ë¶€í„° ~ ì˜ˆì‹œ pipeline ê¹Œì§€)](https://velog.io/@bbkyoo/Jenkins)

# Jenkins
- JenkinsëŠ” CI/CDë¥¼ ìœ„í•œ ì˜¤í”ˆ ì†ŒìŠ¤ ë„êµ¬ë¡œ, ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ ìƒëª…ì£¼ê¸°ë¥¼ ìë™í™” í•œë‹¤.
- ì½”ë“œ ë³€ê²½ ì‚¬í•­ì´ ë°œìƒí•  ë•Œë§ˆë‹¤ ìë™ìœ¼ë¡œ ë¹Œë“œ, í…ŒìŠ¤íŠ¸, ë°°í¬ ê³¼ì •ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.
- ë”°ë¼ì„œ ê°œë°œìëŠ” ì½”ë“œ ë³€ê²½ì— ë”°ë¥¸ ë¹Œë“œ ë° í…ŒìŠ¤íŠ¸ ê³¼ì •ì„ ìˆ˜ë™ìœ¼ë¡œ ìˆ˜í–‰í•  í•„ìš”ê°€ ì—†ì–´ì§„ë‹¤.
- ë•Œë¬¸ì— ê°œë°œì— ëŒ€í•œ ì½”ë“œ ê²€ì¦ ë° ë°°í¬í•  ìˆ˜ ìˆê³ , ì´ ê³¼ì •ì—ì„œ íœ´ë¨¼ ì—ëŸ¬ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.
## êµ¬ì¡°
- Master/Slaveë¼ëŠ” êµ¬ì¡°ë¡œ ë™ì‘í•œë‹¤.
### Master
- MasterëŠ” **controller**ë¼ê³ ë„ ë¶ˆë¦°ë‹¤.
- Jenkins slaveë¥¼ ê´€ë¦¬í•˜ê³  ì‘ì—… ìŠ¤ì¼€ì¤„ë§ê³¼ slave ëª¨ë‹ˆí„°ë§ì„ í¬í•¨í•˜ì—¬ ë‹¤ì–‘í•œ ì‘ì—…ì„ ê´€ë¦¬í•œë‹¤.
### Slave
- SlaveëŠ” **agent**ë¼ê³  ë¶ˆë¦°ë‹¤.
- ì‹¤ì œ íŒŒì´í”„ë¼ì¸ ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤.
- ë‹¤ì–‘í•œ í™˜ê²½ì—ì„œ ì‘ë™í•˜ë©° ì‘ì—…ì„ ë¶„ì‚°ì‹œì¼œ ë¶€í•˜ë¥¼ ê°ì†Œì‹œí‚¤ëŠ” ì—­í• ì„ í•œë‹¤.
- agentëŠ” ë¡œì»¬ ë˜ëŠ” í´ë¼ìš°ë“œ ì»´í“¨í„°ë¥¼ í†µí•´ Jenkins controllerì— ì—°ê²°ë  ìˆ˜ ìˆë‹¤.
- ë”°ë¼ì„œ ë‹¤ì–‘í•œ ìœ ì—°ì„±ì„ ì œê³µí•œë‹¤.

![img_3](./img/img_3.png)
### SCM (Source code Management)
- ì½”ë“œê°€ ë³´ê´€ë˜ì–´ ìˆëŠ” Git ì €ì¥ì†Œì— ì½”ë“œ ë³€ê²½ì‚¬í•­ì„ ê°ì§€í•˜ì—¬ ìë™ìœ¼ë¡œ íŒŒì´í”„ë¼ì¸ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.

### CI (Continuous Integration)
- íŒŒì´í”„ë¼ì¸ì´ ì‹¤í–‰ë˜ë©´ Agentë¥¼ í†µí•´ íŒŒì´í”„ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸ì— ì •ì˜ëœ ì‘ì—…(job)ì´ ì‹¤í–‰ëœë‹¤.
- ì´ë•Œ ì†ŒìŠ¤ ì½”ë“œ ë¹Œë“œ, ì½”ë“œ ê²€ì¦ í…ŒìŠ¤íŠ¸, ë„ì»¤ ì´ë¯¸ì§€ ë¹Œë“œ, ë„ì»¤ ì´ë¯¸ì§€ ê²€ì¦ ë“± ì—¬ëŸ¬ ì‘ì—…ì´ ìˆœì°¨ì ìœ¼ë¡œ ì§„í–‰ëœë‹¤.

### CD (Continuous Deployment)
- íŒŒì´í”„ë¼ì¸ì—ì„œ ì •ì˜í•œ ë°°í¬ ì‘ì—…ì— ë”°ë¼ ë°°í¬ëœë‹¤.
### íŒŒì´í”„ë¼ì¸
- íŒŒì´í”„ë¼ì¸ì´ë€ CI/CD íŒŒì´í”„ë¼ì¸ì„ ì  í‚¨ìŠ¤ì— êµ¬í˜„í•˜ê¸° ìœ„í•œ ì¼ë ¨ì˜ í”ŒëŸ¬ê·¸ì¸ë“¤ì˜ ì§‘í•©ì´ì êµ¬ì„±ì´ë‹¤.
- ì¦‰ ì—¬ëŸ¬ í”ŒëŸ¬ê·¸ì¸ë“¤ì„ ì´ íŒŒì´í”„ë¼ì¸ì—ì„œ ìš©ë„ì— ë§ê²Œ ì‚¬ìš©í•˜ê³  ì •ì˜í•¨ìœ¼ë¡œì¨ íŒŒì´í”„ë¼ì¸ì„ í†µí•œ ì„œë¹„ìŠ¤ê°€ ë°°í¬ëœë‹¤.
- ì  í‚¨ìŠ¤ê°€ ë™ì‘ë˜ê¸° ìœ„í•´ì„œëŠ” ì—¬ëŸ¬ í”ŒëŸ¬ê·¸ì¸ë“¤ì´ íŒŒì´í”„ë¼ì¸ì„ í†µí•´ í˜ëŸ¬ê°€ëŠ” ê³¼ì •ì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤.

> **ğŸ“ŒÂ ì°¸ê³ ìë£Œ**  
> [Jenkinsë€? ê°œë…ë¶€í„° ì„¤ì¹˜ ì‹¤í–‰ê¹Œì§€ (ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½)](https://wlsdn3004.tistory.com/63#c1)
> [Jenkinsë€? (CI / CDì™€ Jenkinsì˜ ê°œë…ë¶€í„° ~ ì˜ˆì‹œ pipeline ê¹Œì§€)](https://velog.io/@bbkyoo/Jenkins)

# NGINX
![img_4](./img/img_4.png)
- NGINX ëŠ” ì›¹ ì„œë¹„ìŠ¤, ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ, ìºì‹±, ë¡œë“œ ë°¸ëŸ°ì‹±, ë¯¸ë””ì–´ ìŠ¤íŠ¸ë¦¬ë° ë“±ì„ ìœ„í•œ ì˜¤í”ˆ ì†ŒìŠ¤ ì†Œí”„íŠ¸ì›¨ì–´ì´ë‹¤.
- **ë©€í‹° í”„ë¡œì„¸ìŠ¤ ì‹±ê¸€ ìŠ¤ë ˆë“œ** ë°©ì‹ìœ¼ë¡œ ë™ì‘í•œë‹¤.
- **ë¹„ë™ê¸° ì´ë²¤íŠ¸ ë°©ì‹ìœ¼ë¡œ ë™ì‘**í•´ì„œ ë” ì ì€ ë©”ëª¨ë¦¬ë¡œ ìš´ì˜í•  ìˆ˜ ìˆë‹¤.

> [!NOTE]  
> ì•„íŒŒì¹˜ëŠ” unixê³„ì—´ì˜ OSê°€ ë„¤íŠ¸ì›Œí¬ ì»¤ë„¥ì…˜ì„ ìƒì„±í•˜ëŠ” ë°©ì‹ê³¼ ìœ ì‚¬í•˜ê²Œ, ìœ ì € ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ í• ë‹¹í•´ ì²˜ë¦¬í•˜ê²Œ êµ¬í˜„í•˜ì˜€ë‹¤. í”„ë¡œì„¸ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ë¹„ìš©ì€ ë¶€í•˜ê°€ ìƒë‹¹í•˜ê¸° ë•Œë¬¸ì—, í”„ë¡œì„¸ìŠ¤ë¥¼ ë¯¸ë¦¬ ìƒì„±í•´ì„œ í• ë‹¹í•˜ëŠ” PREFORK ë°©ì‹ì„ í™œìš©í•˜ì˜€ë‹¤.  
> ìœ ì € í•˜ë‚˜ê°€ ì ‘ê·¼í•˜ë©´ PREFORK ê³¼ì •ì„ í†µí•´ ìƒì„±í•´ë†“ì€ í”„ë¡œì„¸ìŠ¤ í•˜ë‚˜ë¥¼ í• ë‹¹í•´ ìœ ì €ì˜ HTTP ìš”ì²­(ex. `GET /index.html`)ì„ ì²˜ë¦¬í•œë‹¤. ë§Œì•½ PREFORKë¡œ ë§Œë“¤ì–´ë†“ì€ í”„ë¡œì„¸ìŠ¤ê°€ ì´ë¯¸ ëˆ„êµ°ê°€ì˜ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  ìˆë‹¤ë©´ ìƒˆë¡œìš´ Processë¥¼ ë§Œë“¤ì–´ ì²˜ë¦¬í•œë‹¤.  
> 1999ë…„, PCì˜ ë³´ê¸‰ë¥ ì´ ë†’ì•„ì§€ê¸° ì‹œì‘í•˜ë©´ì„œ ì¸í„°ë„·ë„ ë„ë¦¬ ë³´ê¸‰ë˜ê¸° ì‹œì‘í–ˆë‹¤. ê·¸ëŸ¬ë©´ì„œ ì´ì „ë³´ë‹¤ ë§ì•„ì§„ íŠ¸ë˜í”½, ì¦‰ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„°ì˜ ì»¤ë„¥ì…˜ì„ã…‡ ì²˜ë¦¬í•  í”„ë¡œì„¸ìŠ¤ë¥¼ ìƒˆë¡­ê²Œ ìƒì„±í•´ì£¼ì§€ ëª»í•˜ëŠ” ë¬¸ì œê°€ ìƒê¸°ê²Œ ëœë‹¤. ì´ ë¬¸ì œë¥¼ `ì»¤ë„¥ì…˜ 10,000ê°œ ë¬¸ì œ`, ì¤„ì—¬ì„œ `c10k`ë¬¸ì œë¼ê³  ë¶ˆë €ë‹¤.

## êµ¬ì¡°
![img_5](./img/img_5.png)
- í•˜ë‚˜ì˜ Master Processì™€ Nê°œì˜ ê³ ì •ëœ Worker Processë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤.
- Master Processì˜ ì£¼ ì—­í• ì€ ì„¤ì • íŒŒì¼ì„ ì½ê±°ë‚˜ ê²€ì¦í•˜ë©° Worker Processë¥¼ ê´€ë¦¬í•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•œë‹¤.
- Worker Processì—ì„œ ìš”ì²­ì— ëŒ€í•œ ì‹¤ì§ˆì ì¸ ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•œë‹¤.
- NginxëŠ” ë¹„ë™ê¸° ì´ë²¤íŠ¸ ê¸°ë°˜ ëª¨ë¸ì„ í†µí•´ì„œ Worker Process ê°„ì— ìš”ì²­ì„ íš¨ìœ¨ì ìœ¼ë¡œ ë¶„ì‚°í•œë‹¤.

## Reverse Proxy
### Forward Proxy
> ë‚´ë¶€ë§ì— ìˆëŠ” **í´ë¼ì´ì–¸íŠ¸ë“¤ì´ ì™¸ë¶€ë§ì— ì ‘ì†í•  ë•Œ, Proxy Serverë¥¼ ê±°ì³** ì—°ê²°ë˜ëŠ” ë°©ì‹ì´ë‹¤.

![img_6](./img/img_6.png)

- í”„ë¡ì‹œ ì„œë²„ë¡œ ë“¤ì–´ì˜¤ëŠ” íŒ¨í‚·ì— ëŒ€í•´ **ë³´ì•ˆ**ì •ì±…ì„ ì ìš©í•  ìˆ˜ ìˆë‹¤.
- í”„ë¡ì‹œ ì„œë²„ ë‚´ë¶€ì— ìºì‹± ê¸°ëŠ¥ì´ ìˆì–´, ì´ë¯¸ ê°€ì ¸ì˜¨ (ìºì‹±ì— ìˆëŠ”) ë°ì´í„°ì— ëŒ€í•´ ì™¸ë¶€ ì„œë²„ë¡œë¶€í„° ê°€ì ¸ì˜¬ í•„ìš”ê°€ ì—†ì–´, ë¹ ë¥¸ í†µì‹ ì„ ì§€ì›í•´ **ì„±ëŠ¥ìƒ ì´ì **ì´ ìˆë‹¤.
### Reverse Proxy
> ì™¸ë¶€ë§ì— ìˆëŠ” í´ë¼ì´ì–¸íŠ¸ë“¤ì´ **ë‚´ë¶€ë§ì—ì„œ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ì— ì ‘ê·¼í•  ë•Œ, ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ì„œë²„ë¥¼ ë¨¼ì € ê±°ì³ì„œ ë‚´ë¶€ ì„œë²„ë¡œ ë“¤ì–´ì˜¤ëŠ” ë°©ì‹**

![img_7](./img/img_7.png)

- ì™¸ë¶€ë§ì— ìˆëŠ” **í´ë¼ì´ì–¸íŠ¸ëŠ” ì‹¤ì œë¡œ ë‚´ë¶€ë§ì— ìˆëŠ” ì„œë²„ì˜ ì¡´ì¬ë¥¼ ëª¨ë¥¸ë‹¤.** 
  ëª¨ë“  ì ‘ì†ì€ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ì„œë²„ì—ê²Œ ë“¤ì–´ì˜¤ë©°, ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œëŠ” ìš”ì²­ì— ë§¤í•‘ë˜ëŠ” ë‚´ë¶€ ì„œë²„ì˜ ì •ë¡œë¥¼ ì•Œê³  ìˆê³ , ê·¸ì— ë”°ë¼ ìš”ì²­ì„ ë„˜ê²¨ì¤€ë‹¤.
  ë”°ë¼ì„œ **ë‚´ë¶€ ì„œë²„ì˜ ì¡´ì¬ë¥¼ ì™¸ë¶€ë¡œë¶€í„° ìˆ¨ê¸¸ ìˆ˜ ìˆì–´ ë³´ì•ˆìƒ ì´ì **ì´ ìˆë‹¤.
- ë§Œì•½ ì–´ë–¤ í•œêµ­ì— ìˆëŠ” ìœ ì €ê°€ ë¯¸êµ­ì— ì›¹ì„œë²„ë¥¼ ë‘ê³  ìˆëŠ” ì‚¬ì´íŠ¸ì— ì ‘ì†í• ë•Œ, ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ì„œë²„ê°€ í•œêµ­ì— ìˆë‹¤ê³  í•´ë³´ì.   
  ê·¸ëŸ¬ë©´ í•œêµ­ì— ìˆëŠ” ìœ ì €ëŠ” í•œêµ­ì— ìˆëŠ” ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ì„œë²„ì™€ í†µì‹ í•´ì„œ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ì„œë²„ì— ìºì‹±ë˜ì–´ ìˆëŠ” ë°ì´í„°ë¥¼ ì‚¬ìš©í•  ê²½ìš°ì—ëŠ” ë” ë¹ ë¥¸ ì„±ëŠ¥ì„ ë³´ì—¬ì¤„ìˆ˜ ìˆë‹¤.  
  í¬ì›Œë“œ í”„ë¡ì‹œì˜ ìºì‹±ê³¼ ë¹„ìŠ·í•œ ê¸°ëŠ¥ì„ í•œë‹¤ê³  ë³´ë©´ ëœë‹¤. (ì •í™•íˆ í”„ë¡ì‹œì˜ ë³¸ë˜ ê¸°ëŠ¥)

> **ğŸ“ŒÂ ì°¸ê³ ìë£Œ**  
> [Nginx ë™ì‘ ë°©ì‹ë¶€í„° í”„ë¡ì‹œ, ë¡œë“œë°¸ëŸ°ì„œê¹Œì§€](https://willseungh0.tistory.com/137)
# Tomcat
> ì•„íŒŒì¹˜ ì†Œí”„íŠ¸ì›¨ì–´ ì¬ë‹¨ì˜ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ (Web Application Server, WAS)

- ìë°” ì„œë¸”ë¦¿ì„ ì‹¤í–‰ì‹œí‚¤ê³  JSPì½”ë“œê°€ í¬í•¨ë˜ì–´ ìˆëŠ” ë™ì  ì›¹ í˜ì´ì§€ë¥¼ êµ¬ë™ì‹œì¼œì£¼ëŠ” í”„ë¡œê·¸ë¨ì´ë‹¤.
- ë‚´ì¥ë˜ì–´ ìˆëŠ” ì›¹ ì„œë²„ë¥¼ ì´ìš©í•´ ë…ë¦½ì ìœ¼ë¡œ ì‚¬ìš©ë  ìˆ˜ë„ ìˆìœ¼ë‚˜ ì•„íŒŒì¹˜(httpd), Nginx ë“±ì˜ ì›¹ ì„œë²„ì™€ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.

> [!NOTE] WASì™€ Web Serverì˜ ì°¨ì´
> | í•­ëª©       | ì›¹ ì„œë²„                               | WAS ì„œë²„                                     |
> | -------- | ---------------------------------- | ------------------------------------------ |
> | ì •ì˜       | ì •ì ì¸ ì½˜í…ì¸ (HTML, CSS, ì´ë¯¸ì§€ ë“±)ë¥¼ ì œê³µí•˜ëŠ” ì„œë²„ | ë™ì ì¸ ì½˜í…ì¸ (ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜)ë¥¼ ì²˜ë¦¬í•˜ê³  ì œê³µí•˜ëŠ” ì„œë²„            |
> | ê¸°ëŠ¥       | HTTP í”„ë¡œí† ì½œì„ ì´ìš©í•´ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì›¹ í˜ì´ì§€ ì œê³µ    | ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ë° ë°ì´í„° ì²˜ë¦¬, ì›¹ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ê°„ì˜ ì¤‘ê³„ ì—­í•  |
> | ì£¼ìš” ì†Œí”„íŠ¸ì›¨ì–´ | Apache, Nginx, IIS                 | Tomcat, JBoss, WebLogic, WebSphere         |

## êµ¬ì¡°
![img_8](./img/img_8.png)
- Coyote (HTTP Component) : Tomcatì— TCPë¥¼ í†µí•œ í”„ë¡œí† ì½œ ì§€ì›
- Catalina (Servlet Container) : ìë°” ì„œë¸”ë¦¿ì„ í˜¸ìŠ¤íŒ…í•˜ëŠ” í™˜ê²½
- Jasper (JSP Engine) : ì‹¤ì œ JSP í˜ì´ì§€ì˜ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” Servlet

## ë™ì‘
- HTTP ìš”ì²­ì„ Coyoteì—ì„œ ë°›ì•„ì„œ Catalinaë¡œ ì „ë‹¬
- Catalinaì—ì„œ ì „ë‹¬ë°›ì€ HTTP ìš”ì²­ì„ ì²˜ë¦¬í•  ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì°¾ê³  WEB-INF/web.xml íŒŒì¼ ë‚´ìš©ì„ ì°¸ì¡°í•˜ì—¬ ìš”ì²­ì„ ì „ë‹¬
- ìš”ì²­ëœ Servletì„ í†µí•´ ìƒì„±ëœ JSP íŒŒì¼ë“¤ì´ í˜¸ì¶œë  ë•Œ Jasperê°€ Validation Check/Compileë“±ì„ ìˆ˜í–‰
### ì²˜ë¦¬ìˆœì„œ
- HTTP request â†’ Catalina â†’ Context â†’Servlet â†’ Respnose

![img_9](./img/img_9.png)

- **Tomcat**ì€ JVM ìœ„ì—ì„œ ë™ì‘
- **í•˜ë‚˜ì˜ JVM**ì—ì„œÂ **í•˜ë‚˜ì˜ Tomcat Instanceê°€ í•˜ë‚˜ì˜ Process**ë¡œ ë™ì‘
- **í•˜ë‚˜ì˜ Server**ì—ëŠ”Â **ì—¬ëŸ¬ ê°œì˜ Service**ê°€ ì¡´ì¬ ê°€ëŠ¥, ê°ê°ì˜Â **ServiceëŠ” 1ê°œì˜ Engine**ê³¼Â **ì—¬ëŸ¬ ê°œì˜ Connector**ë¡œ êµ¬ì„±
- **Engine**ì€ Catalina Servlet Engineì´ë¼ê³ ë„ ë¶ˆë¦¬ë©°, ì •ì˜ëœ Connectorë¡œ ë“¤ì–´ì˜¨ ìš”ì²­ì„ í•˜ìœ„ì— ìˆëŠ” í•´ë‹¹ Hostì—ê²Œ ì „ë‹¬í•´ì£¼ëŠ” ì—­í• ì„ ìˆ˜í–‰
- **í•˜ë‚˜ì˜ Engine**ì—ëŠ”Â **ì—¬ëŸ¬ ê°œì˜ Host**ê°€ ì¡´ì¬ ê°€ëŠ¥, HostëŠ” ê°€ìƒí˜¸ìŠ¤íŠ¸ ì´ë¦„ì„ ë‚˜íƒ€ë‚´ë©°, í˜¸ìŠ¤íŠ¸ ì´ë¦„ì´ ê³§ urlì— ë§¤í•‘
- **Host**ì—ëŠ”Â **ì—¬ëŸ¬ ê°œì˜ Context**ê°€ ì¡´ì¬ ê°€ëŠ¥, ContextëŠ” í•˜ë‚˜ì˜ Web Applicationì„ ë‚˜íƒ€ë‚´ë©° ì£¼ë¡œ \*.war íŒŒì¼ì˜ í˜•íƒœë¡œ ë°°í¬
- Tomcat Serverê°€ ìš”ì²­ì„ ë°›ìœ¼ë©´, Catalina (Tomcat Engine)ê°€ ìš”ì²­ì— ë§ëŠ” Context (Context path)ë¥¼ ì°¾ê³ , ContextëŠ” ìì‹ ì´ ì„¤ì •ëœ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ deployment descriptor file (web.xml)ì„ ê¸°ë°˜ìœ¼ë¡œ ì „ë‹¬ë°›ì€ ìš”ì²­ì„ ì„œë¸”ë¦¿ì—ê²Œ ì „ë‹¬í•˜ì—¬ ì²˜ë¦¬

> **ğŸ“ŒÂ ì°¸ê³ ìë£Œ**  
> [Tomcatì´ë€?](https://velog.io/@hsk2454/Tomcat%EC%9D%B4%EB%9E%80)

# ì‹¤ìŠµ
## 1. EC2 ìƒì„±
ê°„ë‹¨í•˜ë‹ˆ íŒ¨ìŠ¤

## 2. í¬íŠ¸ ì¸ë°”ìš´ë“œ ê·œì¹™ ì„¤ì •
8080í¬íŠ¸ë¡œ ì„¤ì •
![img_10](./img/img_10.png)
## 3. ë©”ëª¨ë¦¬ ìŠ¤ì™‘ ì„¤ì •
```bash
free -h # ë©”ëª¨ë¦¬ ìš©ëŸ‰ í™•ì¸
df -h # ë””ìŠ¤í¬ ìš©ëŸ‰ í™•ì¸
sudo fallocate -l 2G /swapfile # ìŠ¤ì™‘ ë©”ëª¨ë¦¬ 2ê¸°ê°€ë¡œ ì„¤ì •
sudo chmod 600 /swapfile # ê¶Œí•œ ë¶€ì—¬
sudo mkswap /swapfile # ìŠ¤ì™‘ ë©”ëª¨ë¦¬ ìƒì„±
sudo swapon /swapfile # ìŠ¤ì™‘ ë©”ëª¨ë¦¬ í™œì„±í™”
free -h # ìŠ¤ì™‘ ë©”ëª¨ë¦¬ ì ìš© í™•ì¸

# ì¬ë¶€íŒ… ì‹œì—ë„ swap ë©”ëª¨ë¦¬ ì„¤ì •í•´ì£¼ë„ë¡ ì„¤ì • ì¶”ê°€
sudo vi /etc/fstab

# /etc/fstab ì•ˆì— ì•„ë˜ ë‚´ìš© ì¶”ê°€
/swapfile swap swap defaults 0 0
```
## 4. MySQL ì„¤ì¹˜
```bash
sudo apt update
sudo apt install mysql-server
```
## 5. jdk ì„¤ì¹˜
```bash
sudo apt update
sudo apt install openjdk-17-jdk -y
java --version
```
## 5. ì´ˆë¡ ìŠ¤í„°ë”” í”„ë¡œì íŠ¸ í´ë¡  ë° ì‹¤í–‰
```bash
# git ì €ì¥ì†Œì—ì„œ í”„ë¡œì íŠ¸ ê°€ì ¸ì˜¤ê¸°
git clone [repository url]

# í”„ë¡œì íŠ¸ ë¹Œë“œ (í”„ë¡œì íŠ¸ ê²½ë¡œë¡œ ë“¤ì–´ê°€ì„œ ì§„í–‰)
./gradle clean build -x test
# í”„ë¡œì íŠ¸ ì‹¤í–‰
cd build/libs/
nohup java -jar [ë¹Œë“œëœ jar íŒŒì¼ëª…] &
```

## 6. nginx ì„¤ì •
```bash
# nginx ì„¤ì¹˜
sudo apt update
sudo apt install nginx

# nginx í…ŒìŠ¤íŠ¸
nginx -t
```
nginx ê²½ë¡œ: /etc/nginx/
```nginx
# ì„¤ì • íŒŒì¼ ê²½ë¡œ
# /etc/nginx/sites-enabled/default or other
# /etc/nginx/nginx.conf

# ì •ì  íŒŒì¼ ì˜ˆì‹œ
server {
    listen 80;
    server_name example.com;

    root /var/www/html;
    index index.html index.htm;

    location / {
        try_files $uri $uri/ =404;
    }
}

# ì–´í”Œë¦¬ì¼€ì´ì…˜ ì˜ˆì‹œ
server {
	listen 80;
	server_name api.example.com;

	location / {
		proxy_pass http://localhost:8080;
	}
}
```
## 7. ì¸ì¦ì„œ ë°œê¸‰
[ë‚´ë„ë©”ì¸.í•œêµ­](https://xn--220b31d95hq8o.xn--3e0b707e/)ì—ì„œ ë¬´ë£Œ ë„ë©”ì¸ ë°œê¸‰
```bash
# certbot ì„¤ì¹˜
sudo apt update
sudo apt install certbot
sudo apt install python3-certbot-nginx

# SSL/TLS ì¸ì¦ì„œ ë°œê¸‰
sudo certbot --nginx -d example.com www.example.com

# ì¸ì¦ì„œ ìë™ ê°±ì‹  ì„¤ì •
sudo crontab -e

# crontabì— ì•„ë˜ ë‚´ìš© ì¶”ê°€
# ë§¤ì›” 1ì¼ ì˜¤ì „ 3ì‹œì— ì¸ì¦ì„œë¥¼ ê°±ì‹ 
0 3 1 * * /usr/bin/certbot renew --renew-hook="sudo systemctl restart nginx"
```
